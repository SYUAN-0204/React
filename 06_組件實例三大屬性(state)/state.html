<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>state</title>
</head>

<body>
    <!-- 準備好一個容器 -->
    <div id="test"></div>
    <div id="demo"></div>

    <!-- 按照順序引入 核心庫要先於擴展庫 -->
    <!-- 引入 react 核心庫 -->
    <script src="../js/react.development.js"></script>
    <!-- 引入 react-dom 用於支援 react 操作 dom -->
    <script src="../js/react-dom.development.js"></script>
    <!-- 引入 babel 用於將 jsx 轉為 js -->
    <script src="../js/babel.min.js"></script>

    <!-- 一定要寫 type="text/babel" -->
    <script type="text/babel">
        // 1 創建組件
        class Weather extends React.Component {

            // 構造器調用幾次？— 1 次
            constructor(props) {
                super(props)
                // 初始化狀態
                this.state = { isHot: true }
                // 解決 changeWeather 中 this 指向問題
                this.changeWeather = this.changeWeather.bind(this)
            }

            // render 調用幾次？— 1+n 次， 1 是初始化的那次， n 是狀態更新的次數
            render() {
                /*
                console.log(this)
                return (
                    <h1>今天天氣很{this.state.isHot ? '炎熱' : '涼爽'}</h1>
                )
                */
                // 讀取狀態
                const { isHot } = this.state
                return (
                    <h1 onClick={this.changeWeather}>今天天氣很{isHot ? '炎熱' : '涼爽'}</h1>
                )
            }

            // changeWeather 調用幾次？— 點幾次調幾次
            changeWeather() {
                // changeWeather放在哪里？— Weather 的原型對象上，供實例使用
                // 由於 changeWeather 是作為 onClick 的回調，所以不是通過實例調用的，是直接調用
                // 類中的方法默認開啟了局部的嚴格模式，所以 changeWeather 中的 this 為 undifined

                // 獲取原來的 isHot 的值
                const isHot = this.state.isHot
                // 狀態必需通過 setState 進行更改，且更新是一種合併，不是替換
                this.setState({ isHot: !isHot })

                // 狀態(state)不可直接更改，下面這行就是直接更改
                //this.state.isHot = !isHot // 這是錯誤的寫法
            }
        }
        // 2 渲染組件到頁面
        ReactDOM.render(<Weather />, document.getElementById('test'))

        /*
        const title = document.getElementById('title')
        title.addEventListener('click', () => {
            alert('標題被點擊了')
        })
        const title = document.getElementById('title')
        title.onclick = () => {
            alert('標題被點擊了')
        }
        */
    </script>
</body>

</html>